{"ast":null,"code":"import axios from \"axios\";\n\nclass ApiClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl;\n    this.token = null;\n    this.tokenName = \"student_store_token\";\n  }\n\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem(this.tokenName, token);\n  }\n\n  async request(_ref) {\n    let {\n      endpoint,\n      method = `GET`,\n      data = {}\n    } = _ref;\n    const url = `${this.remoteHostUrl}/${endpoint}`;\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: this.token ? `Bearer ${this.token}` : \"\"\n    };\n\n    try {\n      const res = await axios({\n        url,\n        method,\n        data,\n        headers\n      });\n      return {\n        data: res.data,\n        error: null\n      };\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response$data$;\n\n      console.error({\n        errorResponse: error.response\n      });\n      const message = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.error) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message;\n      return {\n        data: null,\n        error: message || String(error)\n      };\n    }\n  }\n\n  async fetchUserFromToken() {\n    return await this.request({\n      endpoint: `auth/me/`,\n      method: `GET`\n    });\n  }\n\n  async signupUser(credentials) {\n    return await this.request({\n      endpoint: `auth/register/`,\n      method: `POST`,\n      data: credentials\n    });\n  }\n\n  async loginUser(credentials) {\n    return await this.request({\n      endpoint: `auth/login/`,\n      method: `POST`,\n      data: credentials\n    });\n  }\n\n  async listProducts() {\n    return await this.request({\n      endpoint: `store/`,\n      method: `GET`\n    });\n  }\n\n  async createOrder(order) {\n    return await this.request({\n      endpoint: `order/`,\n      method: `POST`,\n      data: order\n    });\n  }\n\n  async logoutUser() {\n    this.setToken(null);\n    localStorage.setItem(this.tokenName, \"\");\n  }\n\n}\n\nconst apiClient = new ApiClient(\"http://localhost:3001\");\nexport default apiClient;","map":{"version":3,"names":["axios","ApiClient","constructor","remoteHostUrl","token","tokenName","setToken","localStorage","setItem","request","endpoint","method","data","url","headers","Authorization","res","error","console","errorResponse","response","message","String","fetchUserFromToken","signupUser","credentials","loginUser","listProducts","createOrder","order","logoutUser","apiClient"],"sources":["/Users/hawoissa/Documents/SITE Labs/Lab 5-1/student_store_pt2_starter/student-store-ui/src/services/apiClient.js"],"sourcesContent":["import axios from \"axios\"\n\nclass ApiClient {\n  constructor(remoteHostUrl) {\n    this.remoteHostUrl = remoteHostUrl\n    this.token = null\n    this.tokenName = \"student_store_token\"\n  }\n\n  setToken(token) {\n    this.token = token\n    localStorage.setItem(this.tokenName, token)\n  }\n\n  async request({ endpoint, method = `GET`, data = {} }) {\n    const url = `${this.remoteHostUrl}/${endpoint}`\n\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: this.token ? `Bearer ${this.token}` : \"\",\n    }\n\n    try {\n      const res = await axios({ url, method, data, headers })\n      return { data: res.data, error: null }\n    } catch (error) {\n      console.error({ errorResponse: error.response })\n      const message = error?.response?.data?.error?.message\n      return { data: null, error: message || String(error) }\n    }\n  }\n\n  async fetchUserFromToken() {\n    return await this.request({ endpoint: `auth/me/`, method: `GET` })\n  }\n\n  async signupUser(credentials) {\n    return await this.request({ endpoint: `auth/register/`, method: `POST`, data: credentials })\n  }\n\n  async loginUser(credentials) {\n    return await this.request({ endpoint: `auth/login/`, method: `POST`, data: credentials })\n  }\n\n async listProducts() {\n   return await this.request({ endpoint: `store/`, method: `GET` })\n }\n\n async createOrder (order) {\n   return await this.request({ endpoint: `order/`, method: `POST`, data: order })\n }\n\n  async logoutUser() {\n    this.setToken(null)\n    localStorage.setItem(this.tokenName, \"\")\n  }\n}\n\nconst apiClient = new ApiClient(\"http://localhost:3001\")\n\nexport default apiClient;"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,SAAN,CAAgB;EACdC,WAAW,CAACC,aAAD,EAAgB;IACzB,KAAKA,aAAL,GAAqBA,aAArB;IACA,KAAKC,KAAL,GAAa,IAAb;IACA,KAAKC,SAAL,GAAiB,qBAAjB;EACD;;EAEDC,QAAQ,CAACF,KAAD,EAAQ;IACd,KAAKA,KAAL,GAAaA,KAAb;IACAG,YAAY,CAACC,OAAb,CAAqB,KAAKH,SAA1B,EAAqCD,KAArC;EACD;;EAEY,MAAPK,OAAO,OAA0C;IAAA,IAAzC;MAAEC,QAAF;MAAYC,MAAM,GAAI,KAAtB;MAA4BC,IAAI,GAAG;IAAnC,CAAyC;IACrD,MAAMC,GAAG,GAAI,GAAE,KAAKV,aAAc,IAAGO,QAAS,EAA9C;IAEA,MAAMI,OAAO,GAAG;MACd,gBAAgB,kBADF;MAEdC,aAAa,EAAE,KAAKX,KAAL,GAAc,UAAS,KAAKA,KAAM,EAAlC,GAAsC;IAFvC,CAAhB;;IAKA,IAAI;MACF,MAAMY,GAAG,GAAG,MAAMhB,KAAK,CAAC;QAAEa,GAAF;QAAOF,MAAP;QAAeC,IAAf;QAAqBE;MAArB,CAAD,CAAvB;MACA,OAAO;QAAEF,IAAI,EAAEI,GAAG,CAACJ,IAAZ;QAAkBK,KAAK,EAAE;MAAzB,CAAP;IACD,CAHD,CAGE,OAAOA,KAAP,EAAc;MAAA;;MACdC,OAAO,CAACD,KAAR,CAAc;QAAEE,aAAa,EAAEF,KAAK,CAACG;MAAvB,CAAd;MACA,MAAMC,OAAO,GAAGJ,KAAH,aAAGA,KAAH,0CAAGA,KAAK,CAAEG,QAAV,4EAAG,gBAAiBR,IAApB,kFAAG,qBAAuBK,KAA1B,0DAAG,sBAA8BI,OAA9C;MACA,OAAO;QAAET,IAAI,EAAE,IAAR;QAAcK,KAAK,EAAEI,OAAO,IAAIC,MAAM,CAACL,KAAD;MAAtC,CAAP;IACD;EACF;;EAEuB,MAAlBM,kBAAkB,GAAG;IACzB,OAAO,MAAM,KAAKd,OAAL,CAAa;MAAEC,QAAQ,EAAG,UAAb;MAAwBC,MAAM,EAAG;IAAjC,CAAb,CAAb;EACD;;EAEe,MAAVa,UAAU,CAACC,WAAD,EAAc;IAC5B,OAAO,MAAM,KAAKhB,OAAL,CAAa;MAAEC,QAAQ,EAAG,gBAAb;MAA8BC,MAAM,EAAG,MAAvC;MAA8CC,IAAI,EAAEa;IAApD,CAAb,CAAb;EACD;;EAEc,MAATC,SAAS,CAACD,WAAD,EAAc;IAC3B,OAAO,MAAM,KAAKhB,OAAL,CAAa;MAAEC,QAAQ,EAAG,aAAb;MAA2BC,MAAM,EAAG,MAApC;MAA2CC,IAAI,EAAEa;IAAjD,CAAb,CAAb;EACD;;EAEgB,MAAZE,YAAY,GAAG;IACnB,OAAO,MAAM,KAAKlB,OAAL,CAAa;MAAEC,QAAQ,EAAG,QAAb;MAAsBC,MAAM,EAAG;IAA/B,CAAb,CAAb;EACD;;EAEgB,MAAXiB,WAAW,CAAEC,KAAF,EAAS;IACxB,OAAO,MAAM,KAAKpB,OAAL,CAAa;MAAEC,QAAQ,EAAG,QAAb;MAAsBC,MAAM,EAAG,MAA/B;MAAsCC,IAAI,EAAEiB;IAA5C,CAAb,CAAb;EACD;;EAEgB,MAAVC,UAAU,GAAG;IACjB,KAAKxB,QAAL,CAAc,IAAd;IACAC,YAAY,CAACC,OAAb,CAAqB,KAAKH,SAA1B,EAAqC,EAArC;EACD;;AArDa;;AAwDhB,MAAM0B,SAAS,GAAG,IAAI9B,SAAJ,CAAc,uBAAd,CAAlB;AAEA,eAAe8B,SAAf"},"metadata":{},"sourceType":"module"}